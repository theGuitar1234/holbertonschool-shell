#!/usr/bin/env bash
#This is a comment
awk 'BEGIN{FS="\""}
{
  split($1,a," "); ip=a[1]
  split($3,b," "); code=b[1]
  if (ip ~ /^[0-9.]+$/ && code ~ /^[0-9][0-9][0-9]$/) print ip, code
}' apache-access.log |
sort |
uniq -c |
sort -k1,1nr -k2,2 -k3,3n |
awk '{ printf "%7d %s %s\n", $1, $2, $3 }'
